@inherits LayoutComponentBase
@inject BlazorComponentBus.ComponentBus busSvc
@inject NavigationManager navSvc
@inject ISnackbar snackSvc

<MudLayout>
    <MudAppBar Elevation=1 Bottom=false>
        <MudText Typo=Typo.h5 Class="ml-3">.NET6 Blazor PWA Lab</MudText>
        <MudSpacer />
        <MudIconButton Icon=@Icons.Filled.Home Color=Color.Inherit Edge=Edge.End OnClick=GoHome />
    </MudAppBar>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {

    protected override void OnInitialized()
    {
        //Subscribe Component to Specific Message
        busSvc.Subscribe<NotifyMessage>(FooBusEventHandler);
    }

    void GoHome(MouseEventArgs e)
    {
        navSvc.NavigateTo("/");
    }

    void FooBusEventHandler(BlazorComponentBus.MessageArgs args)
    {
        var m = args.GetMessage<NotifyMessage>();
        snackSvc.Add(m.Message, m.Severity);
    }
}